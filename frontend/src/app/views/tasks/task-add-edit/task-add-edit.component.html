<div class="card animated fadeIn">
    <div *ngIf="loading" class="card-body">
        <i class="fa fa-spinner fa-spin"></i>
        Loading...
    </div>
    <div *ngIf="!loading" class="card-body">
        
        <!-- {{ mainForm.value | json }} -->
        <form [formGroup]="mainForm" (ngSubmit)="onSubmit()">

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="">Task title</label>
                        <input type="text" class="form-control" maxlength="50" formControlName="task_title" >
                        <app-field-validation [formGroupToValidate]="mainForm" controlName="task_description"></app-field-validation>
                    </div>
        
                    <div class="form-group">
                        <label for="">Task Description</label>
                        <textarea class="form-control" rows="4" formControlName="task_description"></textarea>
                        <app-field-validation [formGroupToValidate]="mainForm" controlName="task_description"></app-field-validation>
                    </div>

                    <div class="form-group">
                        <label for="">Assigned To</label>
                        <select class="form-control" formControlName="assigned_to" multiple>
                            <option *ngFor="let user of activatedUsers" value="{{user.id}}">{{user.name}}</option>
                        </select>
                        <app-field-validation [formGroupToValidate]="mainForm" controlName="assigned_to"></app-field-validation>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group" style="overflow: auto;">
                        <label for="">Due Date</label><br>
                        <p-calendar [inline]="true" #calendar [inputStyle]="{'width':'100%'}" inputStyleClass="form-control" formControlName="due_date" showTime="true" hourFormat="12">
                            <!-- <p-footer>
                                <button type="button" class="btn btn-primary btn-sm btn-block" (click)="calendar.hideOverlay()">
                                    Close
                                </button>
                            </p-footer> -->
                        </p-calendar>
                        <app-field-validation [formGroupToValidate]="mainForm" controlName="task_description"></app-field-validation>
                    </div>
                </div>
            </div>

            <div class="text-right">
                <button class="btn btn-primary" [disabled]="loading || !mainForm.valid">
                    <i class="fa fa-save"></i> Save
                </button>
            </div>
        </form>


    </div>
</div>